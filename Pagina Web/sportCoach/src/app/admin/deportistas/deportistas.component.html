<div class="content-heading">
  Deportistas
</div>

<div class="row row-1 animated fadeInRight">
	<button type="button" class="btn btn-sm btn-outline-success ml-auto" (click)="newModal()" data-toggle="modal" data-target="#dataModal"> 
    <i class="fas fa-plus-circle"></i> Añadir
  </button>
</div>

<br>

<!-- DATA TABLE -->
<div class="panel panel-default animated fadeInRight" >
  <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" id="data" class="table table-hover display responsive nowrap" style="width:100%">
    <thead class="thead-dark">
      <tr *ngIf="deportistas?.length != 0" class="animated fadeInRight">
        <th scope="col">#</th>
        <th scope="col">Nombre</th>
        <th scope="col">Apellido</th>
        <th scope="col">Email</th>
        <th scope="col">Teléfono</th>
        <th scope="col">Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let deportista of deportistas; let i=index " class="animated fadeInRight">
        <th scope="row">{{i+1}}</th>
        <td>{{deportista.nombre}}</td>
        <td>{{deportista.apellido}}</td>
        <td>{{deportista.email}}</td>
        <td>{{deportista.telefono}}</td>
        <td>
          <button type="button" [routerLink]="['/dashboard/perfil',deportista.id ]" class="btn btn-sm btn-outline-info"><i class="fas fa-user"></i></button>  
          <button type="button" (click)="editModal(deportista)" class="btn btn-sm btn-outline-warning" data-toggle="modal" data-target="#dataModal"><i class="fas fa-edit"></i></button>  
          <button type="button" (click)="eliminar(deportista.id, i)" class="btn btn-sm btn-outline-danger"><i class="fas fa-trash-alt"></i></button>     
        </td>
      </tr>
    </tbody>
    </table>
</div>


<!-- FORMULARIO MODAL -->
<div class="modal fade" id="dataModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel"> 
          <span *ngIf="new == true" ><i class="fas fa-running"></i> Nuevo Deportista</span>
          <span *ngIf="new == false" ><i class="fas fa-edit"></i> Editar Deportista</span>
        </h5> 
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form id="form-deportista" (ngSubmit)="guardar()" #form="ngForm">
        <div class="modal-body">
            <div class="form-row">
              <div class="form-group col-md-6">
                <label>Nombre</label>
                <input *ngIf="new == true"  type="text" class="form-control" placeholder="Nombre" name="nombre" [(ngModel)]="deportista.nombre" >
                <input *ngIf="new == false"  type="text" class="form-control" placeholder="Nombre" name="nombre" [(ngModel)]="deportistaEdit.nombre" >
              
              </div>
              <div class="form-group col-md-6">
                <label >Apellido</label>
                <input *ngIf="new == true" type="text" class="form-control" placeholder="Apellido" name="apellido" [(ngModel)]="deportista.apellido">
                <input *ngIf="new == false" type="text" class="form-control" placeholder="Apellido" name="apellido" [(ngModel)]="deportistaEdit.apellido">
            
              </div>
            </div>
            <div class="form-group">
              <label>Email</label>
              <input *ngIf="new == true"  type="email" class="form-control"  placeholder="Email" name="email" [(ngModel)]="deportista.email">
              <input *ngIf="new == false"  type="email" class="form-control"  placeholder="Email" name="email" [(ngModel)]="deportistaEdit.email">
            </div>
            <div class="form-group">
              <label>Telefono</label>
              <input *ngIf="new == true"  type="text" class="form-control"  placeholder="Telefono" name="telefono" [(ngModel)]="deportista.telefono">
              <input *ngIf="new == false"  type="text" class="form-control"  placeholder="Telefono" name="telefono" [(ngModel)]="deportistaEdit.telefono">
            
            </div>
            <div class="form-group">
                 <label>Cumpleaños</label>
                  <div class="input-group" *ngIf="new == true">
                    <input class="form-control" placeholder="yyyy-mm-dd"
                           name="fechaN" [(ngModel)]="deportista.fechaN" ngbDatepicker #d="ngbDatepicker">
                    <div class="input-group-append">
                      <button class="btn btn-outline-secondary calendar" (click)="d.toggle()" type="button"> <i class="fas fa-calendar"></i></button>
                    </div>
                  </div>

                  <div class="input-group" *ngIf="new == false">
                    <input class="form-control" placeholder="yyyy-mm-dd"
                           name="fechaN" [(ngModel)]="deportistaEdit.fechaN" ngbDatepicker #d="ngbDatepicker">
                    <div class="input-group-append">
                      <button class="btn btn-outline-secondary calendar" (click)="d.toggle()" type="button"> <i class="fas fa-calendar"></i></button>
                    </div>
                  </div>
                  
            </div>
            <div class="form-row">
              <div class="form-group col-md-6">
                <label >Peso</label>
                <input *ngIf="new == true" type="text" class="form-control"  placeholder="Peso" name="peso" [(ngModel)]="deportista.peso">
                <input *ngIf="new == false" type="text" class="form-control"  placeholder="Peso" name="peso" [(ngModel)]="deportistaEdit.peso">
              </div>
              <div class="form-group col-md-6">
                <label >Altura</label>
                <input *ngIf="new == true"  type="text" class="form-control"  placeholder="Altura" name="altura" [(ngModel)]="deportista.altura">
                <input *ngIf="new == false"  type="text" class="form-control"  placeholder="Altura" name="altura" [(ngModel)]="deportistaEdit.altura">
              </div>
            </div>
   
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal">Cerrar</button>
          <button *ngIf="new == true" type="submit" class="btn btn-primary">Guardar</button>
          <button *ngIf="new == false" type="submit" class="btn btn-primary">Editar</button>
        </div>
      </form>
    </div>
  </div>
</div>


